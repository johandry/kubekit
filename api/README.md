# gRPC

To do a change in gRPC just modify the `.proto` file for the product/service and version to apply the change to then execute `make`. Check the Dependencies section if this is the first time modifying the API/proto files.

Files with the header `// Code generated by` should not be modified. These files can be deleted at any time (you can use `make clean-code`) and recreated with `make`. Also, this files should NOT be generated at build time. It's meant to be generated at developing time by the developer, not the user neither the CI/CD engine. And, of course, before build.

## New version

For a new version of the API create a directory with the version number/name inside the API service directory and product/service. For example, when `v1alpha1` version is ready for `kubekit` service, create the directory `kubekit/v1alpha1`. Inside the version directory create the `proto`, `swagger` and `docs` directories. Then just need to create the `.proto` files with the API definition.

Every version directory should have a `Makefile` with the rules `build` and `clean`. You may copy the Makefile form other version as a guide. Basically it should generate/build all the Go and JSON files from the `.proto` file. It should also delete with the rule `clean` all the generated files.

## Dependencies

gRPC require `grpc`, `protoc`, `protobuf` and some libraries/plugins from the gRPC ecosystem. To install them just execute `make dependencies`.

This is an action required only by the developer because the generated Go and Swagger files are not generated when KubeKit is built, they are generated when there is a change in the API. This is also the reason why the Protobuf dependencies are not in a `third_party` directory of this repository.
